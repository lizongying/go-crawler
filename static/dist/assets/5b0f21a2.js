import{g as k,m as G,T as K,_ as f,r as U,a as q,w as Q,t as J,d as Y,u as Z,b as ee,c as y,o as ne,e as E,f as H,h as ie,i as te,j as ae,n as se,k as w,l as _,p as ce,L as de,q as T,W as le,P as c,K as D,s as oe,v as B,x as u,y as p,z as m,A as v,B as I,C as F,D as x,E as $,F as re,G as he,R as P,H as ue}from"./index-4b771267.js";import{g as ge,f as we}from"./1aa80c10.js";import{_ as Se}from"./a9a5de86.js";import{_ as pe}from"./cb0a7a19.js";import"./3da183b4.js";const me=e=>{const{componentCls:n}=e,i=`${n}-inner`;return{[n]:{[`&${n}-small`]:{minWidth:e.switchMinWidthSM,height:e.switchHeightSM,lineHeight:`${e.switchHeightSM}px`,[`${n}-inner`]:{paddingInlineStart:e.switchInnerMarginMaxSM,paddingInlineEnd:e.switchInnerMarginMinSM,[`${i}-checked`]:{marginInlineStart:`calc(-100% + ${e.switchPinSizeSM+e.switchPadding*2}px - ${e.switchInnerMarginMaxSM*2}px)`,marginInlineEnd:`calc(100% - ${e.switchPinSizeSM+e.switchPadding*2}px + ${e.switchInnerMarginMaxSM*2}px)`},[`${i}-unchecked`]:{marginTop:-e.switchHeightSM,marginInlineStart:0,marginInlineEnd:0}},[`${n}-handle`]:{width:e.switchPinSizeSM,height:e.switchPinSizeSM},[`${n}-loading-icon`]:{top:(e.switchPinSizeSM-e.switchLoadingIconSize)/2,fontSize:e.switchLoadingIconSize},[`&${n}-checked`]:{[`${n}-inner`]:{paddingInlineStart:e.switchInnerMarginMinSM,paddingInlineEnd:e.switchInnerMarginMaxSM,[`${i}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${i}-unchecked`]:{marginInlineStart:`calc(100% - ${e.switchPinSizeSM+e.switchPadding*2}px + ${e.switchInnerMarginMaxSM*2}px)`,marginInlineEnd:`calc(-100% + ${e.switchPinSizeSM+e.switchPadding*2}px - ${e.switchInnerMarginMaxSM*2}px)`}},[`${n}-handle`]:{insetInlineStart:`calc(100% - ${e.switchPinSizeSM+e.switchPadding}px)`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${i}`]:{[`${i}-unchecked`]:{marginInlineStart:e.marginXXS/2,marginInlineEnd:-e.marginXXS/2}},[`&${n}-checked ${i}`]:{[`${i}-checked`]:{marginInlineStart:-e.marginXXS/2,marginInlineEnd:e.marginXXS/2}}}}}}},Ie=e=>{const{componentCls:n}=e;return{[n]:{[`${n}-loading-icon${e.iconCls}`]:{position:"relative",top:(e.switchPinSize-e.fontSize)/2,color:e.switchLoadingIconColor,verticalAlign:"top"},[`&${n}-checked ${n}-loading-icon`]:{color:e.switchColor}}}},$e=e=>{const{componentCls:n}=e,i=`${n}-handle`;return{[n]:{[i]:{position:"absolute",top:e.switchPadding,insetInlineStart:e.switchPadding,width:e.switchPinSize,height:e.switchPinSize,transition:`all ${e.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:e.colorWhite,borderRadius:e.switchPinSize/2,boxShadow:e.switchHandleShadow,transition:`all ${e.switchDuration} ease-in-out`,content:'""'}},[`&${n}-checked ${i}`]:{insetInlineStart:`calc(100% - ${e.switchPinSize+e.switchPadding}px)`},[`&:not(${n}-disabled):active`]:{[`${i}::before`]:{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0},[`&${n}-checked ${i}::before`]:{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}}}}},Me=e=>{const{componentCls:n}=e,i=`${n}-inner`;return{[n]:{[i]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:e.switchInnerMarginMax,paddingInlineEnd:e.switchInnerMarginMin,transition:`padding-inline-start ${e.switchDuration} ease-in-out, padding-inline-end ${e.switchDuration} ease-in-out`,[`${i}-checked, ${i}-unchecked`]:{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:`margin-inline-start ${e.switchDuration} ease-in-out, margin-inline-end ${e.switchDuration} ease-in-out`,pointerEvents:"none"},[`${i}-checked`]:{marginInlineStart:`calc(-100% + ${e.switchPinSize+e.switchPadding*2}px - ${e.switchInnerMarginMax*2}px)`,marginInlineEnd:`calc(100% - ${e.switchPinSize+e.switchPadding*2}px + ${e.switchInnerMarginMax*2}px)`},[`${i}-unchecked`]:{marginTop:-e.switchHeight,marginInlineStart:0,marginInlineEnd:0}},[`&${n}-checked ${i}`]:{paddingInlineStart:e.switchInnerMarginMin,paddingInlineEnd:e.switchInnerMarginMax,[`${i}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${i}-unchecked`]:{marginInlineStart:`calc(100% - ${e.switchPinSize+e.switchPadding*2}px + ${e.switchInnerMarginMax*2}px)`,marginInlineEnd:`calc(-100% + ${e.switchPinSize+e.switchPadding*2}px - ${e.switchInnerMarginMax*2}px)`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${i}`]:{[`${i}-unchecked`]:{marginInlineStart:e.switchPadding*2,marginInlineEnd:-e.switchPadding*2}},[`&${n}-checked ${i}`]:{[`${i}-checked`]:{marginInlineStart:-e.switchPadding*2,marginInlineEnd:e.switchPadding*2}}}}}},xe=e=>{const{componentCls:n}=e;return{[n]:f(f(f(f({},U(e)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:e.switchMinWidth,height:e.switchHeight,lineHeight:`${e.switchHeight}px`,verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${e.motionDurationMid}`,userSelect:"none",[`&:hover:not(${n}-disabled)`]:{background:e.colorTextTertiary}}),q(e)),{[`&${n}-checked`]:{background:e.switchColor,[`&:hover:not(${n}-disabled)`]:{background:e.colorPrimaryHover}},[`&${n}-loading, &${n}-disabled`]:{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${n}-rtl`]:{direction:"rtl"}})}},fe=k("Switch",e=>{const n=e.fontSize*e.lineHeight,i=e.controlHeight/2,r=2,s=n-r*2,a=i-r*2,h=G(e,{switchMinWidth:s*2+r*4,switchHeight:n,switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchInnerMarginMin:s/2,switchInnerMarginMax:s+r+r*2,switchPadding:r,switchPinSize:s,switchBg:e.colorBgContainer,switchMinWidthSM:a*2+r*2,switchHeightSM:i,switchInnerMarginMinSM:a/2,switchInnerMarginMaxSM:a+r+r*2,switchPinSizeSM:a,switchHandleShadow:`0 2px 4px 0 ${new K("#00230b").setAlpha(.2).toRgbString()}`,switchLoadingIconSize:e.fontSizeIcon*.75,switchLoadingIconColor:`rgba(0, 0, 0, ${e.opacityLoading})`,switchHandleActiveInset:"-30%"});return[xe(h),Me(h),$e(h),Ie(h),me(h)]}),ve=J("small","default"),be=()=>({id:String,prefixCls:String,size:c.oneOf(ve),disabled:{type:Boolean,default:void 0},checkedChildren:c.any,unCheckedChildren:c.any,tabindex:c.oneOfType([c.string,c.number]),autofocus:{type:Boolean,default:void 0},loading:{type:Boolean,default:void 0},checked:c.oneOfType([c.string,c.number,c.looseBool]),checkedValue:c.oneOfType([c.string,c.number,c.looseBool]).def(!0),unCheckedValue:c.oneOfType([c.string,c.number,c.looseBool]).def(!1),onChange:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onMouseup:{type:Function},"onUpdate:checked":{type:Function},onBlur:Function,onFocus:Function}),Ce=Y({compatConfig:{MODE:3},name:"ASwitch",__ANT_SWITCH:!0,inheritAttrs:!1,props:be(),slots:Object,setup(e,n){let{attrs:i,slots:r,expose:s,emit:a}=n;const h=Z(),b=ee(),S=y(()=>{var t;return(t=e.disabled)!==null&&t!==void 0?t:b.value});ne(()=>{E(),E()});const o=H(e.checked!==void 0?e.checked:i.defaultChecked),l=y(()=>o.value===e.checkedValue);ie(()=>e.checked,()=>{o.value=e.checked});const{prefixCls:d,direction:N,size:L}=te("switch",e),[V,O]=fe(d),M=H(),z=()=>{var t;(t=M.value)===null||t===void 0||t.focus()};s({focus:z,blur:()=>{var t;(t=M.value)===null||t===void 0||t.blur()}}),ae(()=>{se(()=>{e.autofocus&&!S.value&&M.value.focus()})});const C=(t,g)=>{S.value||(a("update:checked",t),a("change",t,g),h.onFieldChange())},A=t=>{a("blur",t)},W=t=>{z();const g=l.value?e.unCheckedValue:e.checkedValue;C(g,t),a("click",g,t)},R=t=>{t.keyCode===D.LEFT?C(e.unCheckedValue,t):t.keyCode===D.RIGHT&&C(e.checkedValue,t),a("keydown",t)},X=t=>{var g;(g=M.value)===null||g===void 0||g.blur(),a("mouseup",t)},j=y(()=>({[`${d.value}-small`]:L.value==="small",[`${d.value}-loading`]:e.loading,[`${d.value}-checked`]:l.value,[`${d.value}-disabled`]:S.value,[d.value]:!0,[`${d.value}-rtl`]:N.value==="rtl",[O.value]:!0}));return()=>{var t;return V(w(le,null,{default:()=>[w("button",_(_(_({},ce(e,["prefixCls","checkedChildren","unCheckedChildren","checked","autofocus","checkedValue","unCheckedValue","id","onChange","onUpdate:checked"])),i),{},{id:(t=e.id)!==null&&t!==void 0?t:h.id.value,onKeydown:R,onClick:W,onBlur:A,onMouseup:X,type:"button",role:"switch","aria-checked":o.value,disabled:S.value||e.loading,class:[i.class,j.value],ref:M}),[w("div",{class:`${d.value}-handle`},[e.loading?w(de,{class:`${d.value}-loading-icon`},null):null]),w("span",{class:`${d.value}-inner`},[w("span",{class:`${d.value}-inner-checked`},[T(r,e,"checkedChildren")]),w("span",{class:`${d.value}-inner-unchecked`},[T(r,e,"unCheckedChildren")])])])]}))}}}),ye=Q(Ce),_e=oe("nodes",()=>{const e=B([]);return{nodes:e,GetNodes:async()=>{if(e.length===0)return ge()}}}),Pe={key:0,style:{"font-weight":"bold"}},ze={key:4},Ee={key:6},He={class:"ant-dropdown-link"},Ve={__name:"NodesView",emits:["router—change"],setup(e){const n=[{title:"Hostname",dataIndex:"hostname",width:200,ellipsis:!0,sorter:(s,a)=>s.hostname>a.hostname},{title:"Ip",dataIndex:"ip",width:200,ellipsis:!0,sorter:(s,a)=>s.ip>a.ip},{title:"Start Time",dataIndex:"start_time",width:200,ellipsis:!0,sorter:(s,a)=>s.ip>a.ip},{title:"Enable",dataIndex:"enable",width:100,filters:[{text:"enable",value:!0},{text:"disable",value:!1}],onFilter:(s,a)=>a.enable===s},{title:"Status",dataIndex:"status",width:100,filters:[{text:"online",value:"online"},{text:"offline",value:"offline"}],onFilter:(s,a)=>a.status===s},{title:"Spider",dataIndex:"spider",width:100},{title:"Schedule",dataIndex:"schedule",width:100},{title:"Task",dataIndex:"task",width:100},{title:"Action",dataIndex:"action",width:200,fixed:"right"}],i=B([]);return _e().GetNodes().then(s=>{s.data.data.forEach(a=>{i.push(a)})}),(s,a)=>{const h=pe,b=ye,S=Se;return u(),p(S,{columns:n,"data-source":i},{headerCell:m(({column:o})=>[["hostname","ip","enable","status","start_time"].includes(o.dataIndex)?(u(),v("span",Pe,I(o.title),1)):F("",!0)]),bodyCell:m(({column:o,record:l})=>[o.dataIndex==="spider"?(u(),p(x(P),{key:0,to:"/spiders?node_id="+l.id,onClick:a[0]||(a[0]=d=>s.$emit("router—change","3"))},{default:m(()=>[$(I(l.spider),1)]),_:2},1032,["to"])):o.dataIndex==="schedule"?(u(),p(x(P),{key:1,to:"/schedules?node_id="+l.id,onClick:a[1]||(a[1]=d=>s.$emit("router—change","4"))},{default:m(()=>[$(I(l.schedule),1)]),_:2},1032,["to"])):o.dataIndex==="task"?(u(),p(x(P),{key:2,to:"/tasks?node_id="+l.id,onClick:a[2]||(a[2]=d=>s.$emit("router—change","5"))},{default:m(()=>[$(I(l.task),1)]),_:2},1032,["to"])):o.dataIndex==="start_time"?(u(),v(re,{key:3},[$(I(x(we)(l.start_time)),1)],64)):o.dataIndex==="status"?(u(),v("span",ze,[(u(),p(h,{key:l.status,color:l.status===2?"volcano":"green"},{default:m(()=>[$(I(l.status===2?"OFFLINE":"ONLINE"),1)]),_:2},1032,["color"]))])):o.dataIndex==="enable"?(u(),p(b,{key:5,checked:l.enable,"onUpdate:checked":d=>l.enable=d},null,8,["checked","onUpdate:checked"])):o.dataIndex==="action"?(u(),v("span",Ee,[he("a",He,[$(" More "),w(x(ue))])])):F("",!0)]),_:1},8,["data-source"])}}};export{Ve as default};
